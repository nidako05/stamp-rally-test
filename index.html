<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ねこスタンプラリー</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- ✅ OGP設定 -->
<meta property="og:title" content="ねこスタンプラリー">
<meta property="og:description" content="ねこスタンプをコンプリート✨">
<meta property="og:image" content="https://nidako05.github.io/stamp-rally-test/images/ogp-image.PNG">
<meta property="og:url" content="https://nidako05.github.io/stamp-rally-test/">
<meta property="og:type" content="website">

<!-- ✅ Twitterカード設定 -->
<meta name="twitter:card" content="summary_large_image">

<style>
body {
  font-family: 'Georgia', serif;
  text-align: center;
  background: #0d1b2a;
  color: #E7E2C1;
  overflow-x: hidden;
  margin: 0;
  padding: 20px;
  position: relative;
}
h1, h2 { color: #E7E2C1; }
#login, #content { max-width: 800px; margin: auto; position: relative; z-index: 1; }
.share-buttons a {
  display: inline-block;
  margin: 10px;
  padding: 10px 20px;
  background: linear-gradient(135deg, #AD6299, #E7E2C1);
  color: #fff;
  border-radius: 30px;
  text-decoration: none;
  font-weight: bold;
  box-shadow: 0 4px 8px rgba(0,0,0,0.3);
  transition: transform 0.2s, box-shadow 0.2s;
}
.share-buttons a:hover {
  transform: scale(1.1);
  box-shadow: 0 6px 12px rgba(0,0,0,0.4);
}
#top-banner img {
  width: 100%;
  height: auto;
  display: block;
  border-radius: 10px;
}
#shooting-stars-container {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  z-index: -1;
  overflow: hidden;
}
#map { width: 100%; height: 500px; margin: 20px auto; border-radius: 10px; overflow: hidden; }
</style>

<!-- Leaflet CSS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
</head>

<body>
<div id="shooting-stars-container">
  <canvas id="shooting-stars"></canvas>
</div>

<!-- ✅ トップバナー -->
<div id="top-banner">
  <img src="images/banner.png" alt="トップバーナー画像">
</div>

<div id="content">
  <h1>ねこスタンプラリー</h1>
  <p>スタンプスポットを見つけよう！</p>

  <div id="map"></div>

  <div class="share-buttons" style="margin-top: 20px;">
    <a href="#" id="twitter-share" target="_blank">Xでシェア</a>
    <a href="#" id="line-share" target="_blank" class="line">LINEでシェア</a>
  </div>
</div>

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
function init() {
  // シェアリンク設定
  const url = encodeURIComponent(window.location.href);
  const text = encodeURIComponent('ねこスタンプラリーをコンプリートしました！');
  document.getElementById('twitter-share').href = `https://twitter.com/intent/tweet?url=${url}&text=${text}`;
  document.getElementById('line-share').href = `https://line.me/R/msg/text/?${text}%20${url}`;

  // Leaflet 地図初期化
  const map = L.map('map').setView([35.681236, 139.767125], 13); // 東京駅周辺
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '© OpenStreetMap contributors'
  }).addTo(map);

  // スタンプスポット
  const spots = [
    {id:1, lat:35.682839, lng:139.759455, title:'スタンプ1'},
    {id:2, lat:35.689487, lng:139.691711, title:'スタンプ2'},
    {id:3, lat:35.673343, lng:139.710388, title:'スタンプ3'},
    {id:4, lat:35.693825, lng:139.703299, title:'スタンプ4'},
    {id:5, lat:35.676398, lng:139.76417, title:'スタンプ5'}
  ];
  spots.forEach(spot => {
    L.marker([spot.lat, spot.lng]).addTo(map).bindPopup(spot.title);
  });
}
init();

// 星空アニメーション
const canvas = document.getElementById('shooting-stars');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;
let stars = [];
for (let i = 0; i < 100; i++) {
  stars.push({ x: Math.random() * canvas.width, y: Math.random() * canvas.height, radius: Math.random() * 1.2, alpha: Math.random(), alphaChange: Math.random() * 0.02 });
}
let shootingStars = [];
function createShootingStar() {
  shootingStars.push({ x: Math.random() * canvas.width, y: 0, length: Math.random() * 80 + 100, speed: Math.random() * 10 + 6, size: Math.random() * 1.5 + 1, opacity: 1, angle: Math.PI / 4 });
}
function animate() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  ctx.fillStyle = "white";
  stars.forEach(star => {
    star.alpha += star.alphaChange;
    if (star.alpha <= 0 || star.alpha >= 1) star.alphaChange = -star.alphaChange;
    ctx.globalAlpha = star.alpha;
    ctx.beginPath();
    ctx.arc(star.x, star.y, star.radius, 0, Math.PI * 2);
    ctx.fill();
  });
  ctx.globalAlpha = 1;
  shootingStars.forEach((star, i) => {
    const dx = Math.cos(star.angle) * star.length;
    const dy = Math.sin(star.angle) * star.length;
    ctx.beginPath();
    ctx.moveTo(star.x, star.y);
    ctx.lineTo(star.x + dx, star.y + dy);
    ctx.strokeStyle = `rgba(255,255,255,${star.opacity})`;
    ctx.lineWidth = star.size;
    ctx.stroke();
    star.x += star.speed * Math.cos(star.angle);
    star.y += star.speed * Math.sin(star.angle);
    star.opacity -= 0.01;
    if (star.opacity <= 0) shootingStars.splice(i, 1);
  });
  requestAnimationFrame(animate);
}
setInterval(createShootingStar, 600);
animate();
window.addEventListener('resize', () => {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
});
</script>
</body>
</html>
