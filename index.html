<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>„Å≠„ÅìÔºÅ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- OGPË®≠ÂÆö -->
  <meta property="og:title" content="„Å≠„Åì„Çπ„Çø„É≥„Éó„É©„É™„Éº | „Åã„Çè„ÅÑ„ÅÑ„Çπ„Çø„É≥„ÉóÈõÜ„ÇÅ„Çà„ÅÜÔºÅ" />
  <meta property="og:description" content="„Å≠„Åì„Çπ„Çø„É≥„Éó„ÇíÈõÜ„ÇÅ„Å¶„ÄÅÂèØÊÑõ„ÅÑ„Ç≥„É≥„Éó„É™„Éº„ÉàÁîªÈù¢„ÇíË¶ã„Çà„ÅÜÔºÅ" />
  <meta property="og:image" content="https://your-site.com/images/ogp-image.PNG" />
  <meta property="og:url" content="https://your-site.com/stamp-rally.html" />
  <meta property="og:type" content="website" />

  <!-- Twitter/XÁî® -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="„Å≠„Åì„Çπ„Çø„É≥„Éó„É©„É™„Éº | „Åã„Çè„ÅÑ„ÅÑ„Çπ„Çø„É≥„ÉóÈõÜ„ÇÅ„Çà„ÅÜÔºÅ" />
  <meta name="twitter:description" content="„Å≠„Åì„Çπ„Çø„É≥„Éó„ÇíÈõÜ„ÇÅ„Å¶„ÄÅÂèØÊÑõ„ÅÑ„Ç≥„É≥„Éó„É™„Éº„ÉàÁîªÈù¢„ÇíË¶ã„Çà„ÅÜÔºÅ" />
  <meta name="twitter:image" content="https://your-site.com/images/ogp-image.PNG" />

  <style>
    /* === ÂÖ®‰Ωì„ÅÆ„Çπ„Çø„Ç§„É´ === */
    body {
      font-family: 'Georgia', 'Times New Roman', serif;
      text-align: center;
      padding: 30px;
      background: #2A4478;
      color: #E7E2C1;
      position: relative;
      overflow-x: hidden;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
    }

    h1, h2 {
      font-family: 'Georgia', serif;
      color: #E7E2C1;
      margin-bottom: 10px;
    }

    h1 {
      font-size: 2.5em;
    }

    h2 {
      font-size: 1.8em;
    }

    p {
      font-size: 1.1em;
      color: #E7E2C1;
    }

    /* === „Çπ„Çø„É≥„Éó === */
    #stamp-container {
      margin: 20px 0;
      display: flex;
      overflow-x: auto;
      scroll-snap-type: x mandatory;
      -webkit-overflow-scrolling: touch;
      gap: 15px;
      padding-bottom: 10px;
      width: 100%;
      max-width: 500px;
    }

    .stamp {
      flex: 0 0 120px;
      height: 120px;
      border: 2px dashed #E7E2C1;
      background-color: #2A4478;
      border-radius: 10px;
      transition: transform 0.3s;
      position: relative;
      scroll-snap-align: center;
      box-sizing: border-box;
      cursor: pointer;
    }

    .stamp:hover {
      transform: scale(1.05);
    }

    .stamp img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      border-radius: 8px;
      border: 2px solid transparent;
      user-select: none;
      pointer-events: none;
    }

    .collected {
      border-style: solid;
      border-color: #AD6299;
      box-shadow: 0 0 12px rgba(173, 98, 153, 0.7);
    }

    /* === „Ç≥„É≥„Éó„É™„Éº„Éà„É°„ÉÉ„Çª„Éº„Ç∏ === */
    #completion-message {
      background-color: rgba(231, 226, 193, 0.1);
      color: #E7E2C1;
      border: 2px solid #AD6299;
      padding: 20px;
      border-radius: 10px;
      margin-top: 20px;
      display: none;
      animation: bounce 1.5s ease-in-out infinite alternate;
    }

    #completion-message h2 {
      font-size: 2em;
      margin-bottom: 8px;
      color: #f7c6ff;
      text-shadow: 0 0 10px #d98ae9;
    }

    #completion-message p {
      font-size: 1.2em;
      color: #ffc8ff;
      text-shadow: 0 0 6px #d98ae9;
      margin-bottom: 15px;
    }

    /* === „Ç∑„Çß„Ç¢„Éú„Çø„É≥ === */
    .share-buttons {
      margin-top: 10px;
      display: flex;
      justify-content: center;
      gap: 15px;
    }

    .share-buttons a {
      display: inline-block;
      padding: 12px 30px;
      background: linear-gradient(45deg, #AD6299, #f7c6ff);
      color: #E7E2C1;
      font-weight: 700;
      text-decoration: none;
      border-radius: 25px;
      box-shadow: 0 0 10px rgba(173, 98, 153, 0.8);
      position: relative;
      overflow: hidden;
      transition: background 0.4s, box-shadow 0.4s;
      user-select: none;
    }

    .share-buttons a::before {
      content: "‚≠ê";
      position: absolute;
      left: 8px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 1.3em;
      animation: twinkle 2s infinite;
    }

    .share-buttons a.x::before {
      content: "üê¶"; /* X„ÅÆÈ≥•„Ç¢„Ç§„Ç≥„É≥È¢® */
      left: 6px;
      font-size: 1.5em;
    }

    .share-buttons a.line::before {
      content: "üíö"; /* LINE„Ç´„É©„Éº„ÅÆ„Éè„Éº„Éà */
      left: 8px;
      font-size: 1.3em;
    }

    .share-buttons a:hover {
      background: linear-gradient(45deg, #d98ae9, #fbe8ff);
      box-shadow: 0 0 20px #f7c6ff;
      color: #42275a;
    }

    /* === „Çπ„Çø„É≥„ÉóÁç≤Âæó„Ç®„Éï„Çß„ÇØ„Éà === */
    #stamp-get-popup {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0);
      background: linear-gradient(135deg, #f9c6ff, #d98ae9);
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 0 25px #d98ae9;
      color: #42275a;
      font-weight: bold;
      font-size: 2em;
      text-align: center;
      z-index: 9999;
      transition: transform 0.5s ease;
      user-select: none;
      cursor: pointer;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 20px;
    }

    #stamp-get-popup.show {
      transform: translate(-50%, -50%) scale(1);
      animation: pop 0.6s ease forwards;
    }

    #stamp-get-popup img {
      width: 100px;
      height: 100px;
      border-radius: 15px;
      border: 3px solid #42275a;
      box-shadow: 0 0 15px #d98ae9;
    }

    /* === „Ç≠„É©„Ç≠„É©Êòü„Ç®„Éï„Çß„ÇØ„Éà === */
    body::before {
      content: "";
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: transparent url('https://www.transparenttextures.com/patterns/stardust.png') repeat;
      opacity: 0.15;
      z-index: -1;
      animation: sparkle 10s linear infinite alternate;
      filter: drop-shadow(0 0 2px #f7c6ff);
    }

    /* Êòü„ÅÆÂ∞è„Åï„Å™„Ç≠„É©„Ç≠„É©„ÇíË§áÊï∞ÂÄãËøΩÂä†„Åô„Çã */
    .star-effect {
      position: absolute;
      width: 6px;
      height: 6px;
      background: radial-gradient(ellipse at center, #f7c6ff 0%, transparent 70%);
      border-radius: 50%;
      box-shadow:
        0 0 6px #f7c6ff,
        0 0 12px #d98ae9;
      animation: twinkleStar 2s infinite alternate;
      pointer-events: none;
      z-index: 0;
    }

    @keyframes sparkle {
      0% { background-position: 0 0; opacity: 0.1; }
      50% { background-position: 150px 150px; opacity: 0.3; }
      100% { background-position: 300px 300px; opacity: 0.1; }
    }

    @keyframes twinkleStar {
      0% { opacity: 0.6; transform: scale(1); }
      100% { opacity: 1; transform: scale(1.3); }
    }

    /* „Éù„ÉÉ„Éó„Ç¢„ÉÉ„Éó„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ */
    @keyframes pop {
      0% { transform: translate(-50%, -50%) scale(0.7); opacity: 0; }
      50% { transform: translate(-50%, -50%) scale(1.1); opacity: 1; }
      100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
    }

    /* „Éê„Ç¶„É≥„Çπ„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ */
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    /* „Éú„Çø„É≥„ÅÆÊòü„Åå„Ç≠„É©„Ç≠„É© */
    @keyframes twinkle {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.3; }
    }

  </style>
</head>
<body>

  <!-- „Éë„Çπ„ÉØ„Éº„ÉâÂÖ•ÂäõÁîªÈù¢ -->
  <div id="login">
    <h2>„Éë„Çπ„ÉØ„Éº„Éâ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ</h2>
    <input type="password" id="passwordInput" placeholder="„Éë„Çπ„ÉØ„Éº„Éâ" />
    <button onclick="checkPassword()">„É≠„Ç∞„Ç§„É≥</button>
    <p id="error" style="color:red;"></p>
  </div>

  <!-- „Çπ„Çø„É≥„Éó„É©„É™„ÉºÊú¨‰Ωì -->
  <div id="content" style="display: none;">
    <img src="images/top-banner.PNG" alt="„Å≠„Åì" style="max-width: 100%; height: auto;" />
    <h1>„Å≠„Åì</h1>
    <p>„Å≠„Åì„ÅÆ„Çπ„Çø„É≥„Éó„Çí5„Å§ÈõÜ„ÇÅ„Çà„ÅÜÔºÅ</p>

    <div id="stamp-container"></div>

    <div id="completion-message">
      <h2>„Ç≥„É≥„Éó„É™„Éº„Éà„Åä„ÇÅ„Åß„Å®„ÅÜÔºÅüéâ</h2>
      <p>SNS„Åß„Ç∑„Çß„Ç¢„Åó„Çà„ÅÜÔºÅ</p>
      <div class="share-buttons">
        <a href="#" id="twitter-share" class="x" target="_blank" rel="noopener noreferrer">X„Åß„Ç∑„Çß„Ç¢</a>
        <a href="#" id="line-share" class="line" target="_blank" rel="noopener noreferrer">LINE„Åß„Ç∑„Çß„Ç¢</a>
      </div>
    </div>
  </div>

  <!-- „Çπ„Çø„É≥„Éó„Ç≤„ÉÉ„Éà„Éù„ÉÉ„Éó„Ç¢„ÉÉ„Éó -->
  <div id="stamp-get-popup" onclick="closeStampPopup()" style="display:none;">
    <img src="" alt="„Çπ„Çø„É≥„Éó„Ç≤„ÉÉ„ÉàÔºÅ" id="popup-stamp-image" />
    <div>„Çπ„Çø„É≥„Éó„Ç≤„ÉÉ„ÉàÔºÅ‚ú®</div>
    <small>„Çø„ÉÉ„Éó„ÅßÊàª„Çã</small>
  </div>

  <script>
    const correctPassword = "roacoco"; // Â•Ω„Åç„Å™„Éë„Çπ„ÉØ„Éº„Éâ„Å´Â§â„Åà„Å¶OK
    const totalStamps = 5;

    function checkPassword() {
      const input = document.getElementById('passwordInput').value;
      if (input === correctPassword) {
        document.getElementById('login').style.display = 'none';
        document.getElementById('content').style.display = 'block';
        init();
      } else {
        document.getElementById('error').textContent = "„Éë„Çπ„ÉØ„Éº„Éâ„ÅåÈÅï„ÅÑ„Åæ„Åô";
      }
    }

    function getStampData() {
      const data = localStorage.getItem('collectedStamps');
      return data ? JSON.parse(data) : [];
    }

    function saveStampData(stamps) {
      localStorage.setItem('collectedStamps', JSON.stringify(stamps));
    }

    function getStampFromUrl() {
      const urlParams = new URLSearchParams(window.location.search);
      const spot = parseInt(urlParams.get('spot'));
      if (!isNaN(spot) && spot >= 1 && spot <= totalStamps) {
        return spot;
      }
      return null;
    }

    function updateStampsUI() {
      const container = document.getElementById('stamp-container');
      container.innerHTML = '';
      const stamps = getStampData();

      for (let i = 1; i <= totalStamps; i++) {
        const div = document.createElement('div');
        div.classList.add('stamp');
        if (stamps.includes(i)) {
          div.classList.add('collected');
          div.dataset.stamp = i;
          div.innerHTML = `<img src="images/stamp${i}.PNG" alt="„Çπ„Çø„É≥„Éó${i}" />`;
          div.onclick = () => showStampPopup(i);
        } else {
          div.innerHTML = `<img src="images/stamp${i}.PNG" alt="„Çπ„Çø„É≥„Éó${i}" style="opacity: 0.2;" />`;
        }
        container.appendChild(div);
      }

      if (stamps.length >= totalStamps) {
        document.getElementById('completion-message').style.display = 'block';
        updateShareLinks();
      } else {
        document.getElementById('completion-message').style.display = 'none';
      }
    }

    function updateShareLinks() {
      const text = encodeURIComponent("„Å≠„Åì„Çπ„Çø„É≥„Éó„Çí„Ç≥„É≥„Éó„É™„Éº„Éà‚ú® #„Å≠„Åì #cat");
      const url = encodeURIComponent(window.location.href.split('?')[0]);
      document.getElementById('twitter-share').href =
        `https://twitter.com/intent/tweet?text=${text}&url=${url}`;
      document.getElementById('line-share').href =
        `https://social-plugins.line.me/lineit/share?url=${url}&text=${text}`;
    }

    function showStampPopup(stampNumber) {
      const popup = document.getElementById('stamp-get-popup');
      const img = document.getElementById('popup-stamp-image');
      img.src = `images/stamp${stampNumber}.PNG`;
      popup.style.display = 'flex';
      setTimeout(() => {
        popup.classList.add('show');
      }, 10);
    }

    function closeStampPopup() {
      const popup = document.getElementById('stamp-get-popup');
      popup.classList.remove('show');
      setTimeout(() => {
        popup.style.display = 'none';
      }, 300);
    }

    function init() {
      const stamps = getStampData();
      const newStamp = getStampFromUrl();

      if (newStamp && !stamps.includes(newStamp)) {
        stamps.push(newStamp);
        saveStampData(stamps);
        // Êñ∞„Åó„ÅèÁç≤Âæó„Åó„Åü„Çπ„Çø„É≥„Éó„ÅØ„Éù„ÉÉ„Éó„Ç¢„ÉÉ„Éó„ÅßË¶ã„Åõ„Çã
        showStampPopup(newStamp);
      }

      updateStampsUI();
    }

    window.init = init;
  </script>
</body>
</html>
